<?xml version="1.0" encoding="UTF-8"?>
<svg width="1200" height="900" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font-family: Arial, sans-serif; font-size: 24px; font-weight: bold; fill: #2c3e50; }
      .subtitle { font-family: Arial, sans-serif; font-size: 16px; font-weight: bold; fill: #34495e; }
      .component { font-family: Arial, sans-serif; font-size: 12px; fill: #2c3e50; }
      .arrow { stroke: #3498db; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .data-flow { stroke: #e74c3c; stroke-width: 2; fill: none; marker-end: url(#arrowhead); stroke-dasharray: 5,5; }
      .ai-flow { stroke: #9b59b6; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .box { fill: #ecf0f1; stroke: #bdc3c7; stroke-width: 2; rx: 8; }
      .core-box { fill: #3498db; stroke: #2980b9; stroke-width: 2; rx: 8; }
      .ai-box { fill: #9b59b6; stroke: #8e44ad; stroke-width: 2; rx: 8; }
      .ui-box { fill: #e67e22; stroke: #d35400; stroke-width: 2; rx: 8; }
      .db-box { fill: #27ae60; stroke: #229954; stroke-width: 2; rx: 8; }
      .white-text { fill: white; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#3498db" />
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="600" y="30" text-anchor="middle" class="title">Web Scraper System Architecture</text>
  <text x="600" y="55" text-anchor="middle" class="subtitle">Component Interaction Flow</text>
  
  <!-- User Interfaces Layer -->
  <rect x="50" y="100" width="200" height="80" class="ui-box"/>
  <text x="150" y="120" text-anchor="middle" class="subtitle white-text">User Interfaces</text>
  <text x="150" y="140" text-anchor="middle" class="component white-text">web_ui.py (Flask)</text>
  <text x="150" y="155" text-anchor="middle" class="component white-text">chatbot.py (CLI)</text>
  <text x="150" y="170" text-anchor="middle" class="component white-text">main.py (CLI)</text>
  
  <!-- Core Scraping Engine -->
  <rect x="350" y="100" width="200" height="80" class="core-box"/>
  <text x="450" y="120" text-anchor="middle" class="subtitle white-text">Core Engine</text>
  <text x="450" y="140" text-anchor="middle" class="component white-text">web_scraper.py</text>
  <text x="450" y="155" text-anchor="middle" class="component white-text">WebScraper Class</text>
  <text x="450" y="170" text-anchor="middle" class="component white-text">Basic Scraping Logic</text>
  
  <!-- AI Enhancement Layer -->
  <rect x="650" y="100" width="200" height="80" class="ai-box"/>
  <text x="750" y="120" text-anchor="middle" class="subtitle white-text">AI Enhancement</text>
  <text x="750" y="140" text-anchor="middle" class="component white-text">ai_enhanced_scraper.py</text>
  <text x="750" y="155" text-anchor="middle" class="component white-text">AIEnhancedScraper</text>
  <text x="750" y="170" text-anchor="middle" class="component white-text">Content Analysis</text>
  
  <!-- External AI Services -->
  <rect x="950" y="100" width="200" height="80" class="box"/>
  <text x="1050" y="120" text-anchor="middle" class="subtitle">External AI APIs</text>
  <text x="1050" y="140" text-anchor="middle" class="component">OpenAI GPT-4o</text>
  <text x="1050" y="155" text-anchor="middle" class="component">Anthropic Claude</text>
  <text x="1050" y="170" text-anchor="middle" class="component">Google Gemini</text>
  
  <!-- Data Processing Layer -->
  <rect x="200" y="250" width="400" height="80" class="box"/>
  <text x="400" y="270" text-anchor="middle" class="subtitle">Data Processing & Storage</text>
  <text x="300" y="290" text-anchor="middle" class="component">database_service.py</text>
  <text x="300" y="305" text-anchor="middle" class="component">Session Management</text>
  <text x="300" y="320" text-anchor="middle" class="component">Data Persistence</text>
  <text x="500" y="290" text-anchor="middle" class="component">models.py</text>
  <text x="500" y="305" text-anchor="middle" class="component">Database Schema</text>
  <text x="500" y="320" text-anchor="middle" class="component">SQLAlchemy Models</text>
  
  <!-- Database -->
  <rect x="350" y="400" width="200" height="80" class="db-box"/>
  <text x="450" y="420" text-anchor="middle" class="subtitle white-text">PostgreSQL Database</text>
  <text x="450" y="440" text-anchor="middle" class="component white-text">Scraped Pages</text>
  <text x="450" y="455" text-anchor="middle" class="component white-text">AI Analysis Results</text>
  <text x="450" y="470" text-anchor="middle" class="component white-text">User Sessions</text>
  
  <!-- Utility Components -->
  <rect x="50" y="550" width="150" height="80" class="box"/>
  <text x="125" y="570" text-anchor="middle" class="subtitle">Utilities</text>
  <text x="125" y="590" text-anchor="middle" class="component">utils.py</text>
  <text x="125" y="605" text-anchor="middle" class="component">Helper Functions</text>
  <text x="125" y="620" text-anchor="middle" class="component">URL Processing</text>
  
  <!-- Examples & Demos -->
  <rect x="250" y="550" width="200" height="80" class="box"/>
  <text x="350" y="570" text-anchor="middle" class="subtitle">Examples & Demos</text>
  <text x="350" y="590" text-anchor="middle" class="component">scraper_examples.py</text>
  <text x="350" y="605" text-anchor="middle" class="component">ai_examples.py</text>
  <text x="350" y="620" text-anchor="middle" class="component">ai_integration_guide.py</text>
  
  <!-- Web Templates -->
  <rect x="500" y="550" width="150" height="80" class="box"/>
  <text x="575" y="570" text-anchor="middle" class="subtitle">Web Templates</text>
  <text x="575" y="590" text-anchor="middle" class="component">chat.html</text>
  <text x="575" y="605" text-anchor="middle" class="component">scraper.html</text>
  <text x="575" y="620" text-anchor="middle" class="component">Frontend UI</text>
  
  <!-- Configuration -->
  <rect x="700" y="550" width="150" height="80" class="box"/>
  <text x="775" y="570" text-anchor="middle" class="subtitle">Configuration</text>
  <text x="775" y="590" text-anchor="middle" class="component">Environment Vars</text>
  <text x="775" y="605" text-anchor="middle" class="component">API Keys</text>
  <text x="775" y="620" text-anchor="middle" class="component">Database Config</text>
  
  <!-- Flow Arrows -->
  <!-- User to Core Engine -->
  <line x1="250" y1="140" x2="350" y2="140" class="arrow"/>
  
  <!-- Core Engine to AI Enhancement -->
  <line x1="550" y1="140" x2="650" y2="140" class="ai-flow"/>
  
  <!-- AI Enhancement to External APIs -->
  <line x1="850" y1="140" x2="950" y2="140" class="ai-flow"/>
  
  <!-- Core Engine to Data Processing -->
  <line x1="450" y1="180" x2="400" y2="250" class="data-flow"/>
  
  <!-- Data Processing to Database -->
  <line x1="400" y1="330" x2="450" y2="400" class="data-flow"/>
  
  <!-- Utilities to Core Engine -->
  <line x1="125" y1="550" x2="125" y2="250" class="arrow"/>
  <line x1="125" y1="250" x2="350" y2="180" class="arrow"/>
  
  <!-- Templates to UI -->
  <line x1="575" y1="550" x2="575" y2="200" class="arrow"/>
  <line x1="575" y1="200" x2="250" y2="160" class="arrow"/>
  
  <!-- Data Flow Legend -->
  <rect x="50" y="750" width="500" height="120" class="box"/>
  <text x="300" y="775" text-anchor="middle" class="subtitle">Data Flow Legend</text>
  
  <line x1="70" y1="790" x2="120" y2="790" class="arrow"/>
  <text x="130" y="795" class="component">Request/Response Flow</text>
  
  <line x1="70" y1="810" x2="120" y2="810" class="data-flow"/>
  <text x="130" y="815" class="component">Data Storage Flow</text>
  
  <line x1="70" y1="830" x2="120" y2="830" class="ai-flow"/>
  <text x="130" y="835" class="component">AI Processing Flow</text>
  
  <!-- Process Flow Description -->
  <rect x="600" y="750" width="550" height="120" class="box"/>
  <text x="875" y="775" text-anchor="middle" class="subtitle">Process Flow</text>
  <text x="620" y="795" class="component">1. User submits URL via Web UI or CLI</text>
  <text x="620" y="810" class="component">2. Core scraper fetches and parses content</text>
  <text x="620" y="825" class="component">3. AI enhancement analyzes content (optional)</text>
  <text x="620" y="840" class="component">4. Results stored in database via data service</text>
  <text x="620" y="855" class="component">5. Processed results returned to user interface</text>
  
</svg>